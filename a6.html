<!DOCTYPE>
<html >
<head>
	<title>SQL за 20 минут</title>
	<meta charset=utf-8" />
	<link rel="shortcut icon" href="css/images/1.ico" />
	<link rel="stylesheet" href="css/stylea4.css" type="text/css" />

</head>
<body>
<div id="header">
	<div class="shell">
		<h1 id="logo" class=""align="bottom"><a href="index.html"></a></h1>
		<div id="navigation">
			<ul>
			    <li><a href="index.html" class="">Главная</a></li>
			    <li><a href="article1.html">Статьи</a></li>
				<li><a href="article2.html">Контакты</a>
			</ul>
		</div>
	</div>
</div>


<div id="main">
	<div class="shell">

		<div id="content">
			<div class="col">
				<div class="post">
				<p><h1>SQL за 20 минут</h1></br></br>
				Предлагаем вашему вниманию статью с кричащим названием «SQL за 20 минут». Конечно, весь SQL за 20 минут вы не освоите, но хороший старт получите.</br></br>
				Каждый уважающий себя веб-разработчик должен знать SQL. Хоть он и существует аж с 70-х годов прошлого века, он до сих пор очень широко используется, и без него будет сложно создать нечто серьёзное. Большинство full-stack фреймворков умеют работать с SQL. В их числе: ActiveRecord, Doctrine, Hibernate и многие другие. Несмотря на это, иногда приходится «замарать руки» и пуститься в настоящий SQL.</br></br>
				Именно поэтому мы подготовили короткое вступление, в котором мы пройдёмся по фундаментальным вещам в SQL. Мы настоятельно рекомендуем вам попробовать все приведённые ниже примеры самостоятельно, ведь, как известно, теория — ничто без практики.</br></br>
				Что ж, приступим!</br></br></br>
				<h2>СОЗДАЕМ ТАБЛИЦУ</h2></br>
				Для того, чтобы создать таблицу в SQL, используется выражение CREATE TABLE. Он принимает в качестве параметров все колонки, которые мы хотим внести, а также их типы данных.</br></br>
				Давайте создадим табличку с названием «Months», в которой будет три колонки:</br></br>
				id — иными словами, порядковый номер месяца (целочисленный тип или int)</br></br>
				name — название месяца (строка или varchar(10) (10 символов — максимальная длина строки))</br></br>
				days — число дней в конкретном месяце (целочисленный тип или int)</br></br>
				Код будет выглядеть вот так:</br></br>
				<em style="color:red;">CREATE TABLE months (id int, name varchar(10), days int);</em></br></br>
                Также, когда создаются таблицы, принято добавлять так называемый primary key. Это колонка, значения в которой уникальны. Чаще всего primary key колонкой является id, но в нашем случае это может быть и name, так как имена всех месяцев уникальны. Для более подробной информации предлагаем перейти по этой <a href="https://www.w3schools.com/sql/sql_primarykey.asp">ссылке</a>.</br></br></br>
				<h2>ВВОД ДАННЫХ</h2></br>
				Теперь давайте добавим пару месяцев в нашу табличку. Сделать это можно с помощью команды INSERT. Есть два разных способа использовать INSERT:</br></br>
				Первый способ не подразумевает указания названий колонок, а лишь принимает значения в том порядке, в котором они указаны в таблице.</br></br>
				<em style="color:red;">INSERT INTO months VALUES (1,'January',31);</em></br></br>
				Первый способ короче второго, однако если в будущем мы захотим добавить дополнительные колонки, все предыдущие запросы работать не будут. Для решения данной проблемы следует использовать второй способ. Его суть в том, что перед вводом данных мы указываем названия колонок.</br></br>
				<em style="color:red;">INSERT INTO months (id,name,days) VALUES (2,'February',29);</em></br></br>
				В случае, если мы не укажем одну из колонок, на её место будет записано NULL или заданное значение по умолчанию, но это уже совсем другая история.</br></br></br>
				<h2>SELECT</h2></br></br>
				Данный запрос используется в случае, если нам нужно показать данные в таблице. Наверное, самым простым примером использования SELECT будет следующий запрос:</br></br>
				<em style="color:red;">SELECT * FROM characters</em></br></br>
				Результатом данного запроса будет таблица со всеми данными в таблице characters. Знак звёздочки (*) означает то, что мы хотим показать все столбцы из таблицы без исключений. Так как в базе данных обычно больше одной таблицы, нам необходимо указывать название таблицы, данные из которой мы хотим посмотреть. Сделать это мы можем, используя ключевое слово FROM.</br></br>
				Когда вам нужны лишь некоторые столбцы из таблицы, то вы можете указать их имена через запятую вместо звёздочки.</br></br>
				<em style="color:red;">SELECT name, weapon FROM characters</em></br></br>
				Также иногда нам нужно отсортировать выводимые данные. Для этого мы используем ORDER BY «название столбца». ORDER BY имеет два модификатора: ASC (по возрастанию) (по умолчанию) и DESC (по убыванию).</br></br>
				<em style="color:red;">SELECT name, weapon FROM "characters" ORDER BY name DESC</em></br></br></br>
				<h2>WHERE</h2></br>
				Теперь мы знаем, как показать только конкретные столбцы, но что если мы хотим включить в вывод лишь некоторые конкретные строки? Для этого мы используем WHERE. Данное ключевое слово позволяет нам фильтровать данные по определённому условию.</br></br>
				В следующем запросе мы выведем только тех персонажей, которые в качестве оружия используют пистолет.</br></br>
				<em style="color:red;">SELECT * </br>
				FROM characters</br>
				WHERE weapon = 'pistol';</em></br></br></br>
				<h2>И/ИЛИ</h2></br>
				Условия в WHERE могут быть написаны с использованием логических операторов (AND/OR) и математические операторы сравнения (=, <, >, <=, >=, <>).</br></br>
				К примеру, у нас есть табличка, в которой записаны данные о 4 самых продаваемых музыкальных альбомах всех времён. Давайте выведем только те, жанром которых является рок, а продажи были меньше, чем 50 миллионов копий.</br></br>
				<em style="color:red;">SELECT * </br>
				FROM albums </br>
				WHERE genre = 'rock' AND sales_in_millions <= 50 </br>
				ORDER BY released</em></br></br></br>
				<h2>IN/BETWEEN/LIKE</h2></br>
				Условия в WHERE могут быть записаны с использованием ещё нескольких команд, которыми являются:</br></br>
				IN — сравнивает значение в столбце с несколькими возможными значениями и возвращает true, если значение совпадает хотя бы с одним значением</br></br>
				BETWEEN — проверяет, находится ли значение в каком-то промежутке</br></br>
				LIKE — ищет по шаблону</br></br>
				К примеру, мы можем сделать запрос для вывода данных об альбомах в жанре pop или soul:</br></br>
				<em style="color:red;">SELECT * FROM albums WHERE genre IN ('pop','soul');</em></br></br>
				Если мы хотим вывести все альбомы, которые были выпущены в промежутке между 1975 и 1985 годом, мы можем использовать следующую запись:</br></br>
			    <em style="color:red;">SELECT * FROM albums WHERE released BETWEEN 1975 AND 1985;</em></br></br>
				Также, если мы хотим вывести все альбомы, в названии которых есть буква ‘R’, мы можем использовать следующую запись:</br></br>
				<em style="color:red;">SELECT * FROM albums WHERE album LIKE '%R%';</em></br></br>
				Знак % означает любую последовательность символов (0 символов тоже считается за последовательность).</br></br>
				Если мы хотим вывести все альбомы, первая буква в названии которых — ‘R’, то запись слегка изменится:</br></br>
				<em style="color:red;">SELECT * FROM albums WHERE album LIKE 'R%';</em></br></br>
				В SQL также есть инверсия. Для примера, попробуйте самостоятельно написать NOT перед любым логическим выражением в условии (NOT BETWEEN и так далее).</br></br></br>
				<h2>ФУНКЦИИ</h2></br>
				В SQL полно встроенных функций для выполнения разных операций. Мы же покажем вам только наиболее часто используемые:</br></br>
				COUNT() — возвращает число строк</br></br>
				SUM() — возвращает сумму всех полей с числовыми значениями в них</br></br>
				AVG() — возвращает среднее значение среди строк</br></br>
				MIN()/MAX() — возвращает минимальное/максимальное значение среди строк</br></br>
				Чтобы вывести год выпуска самого старого альбома, в таблице можно использовать следующий запрос:</br></br>
				<em style="color:red;">SELECT MAX(released) FROM albums;</em></br></br>
				Обратите внимание, что если вы напишете запрос, в котором вам, к примеру, нужно будет вывести имя и среднее значение чего-либо, то вы получите ошибку на выводе.</br></br>
				Допустим, вы пишете такой запрос:</br></br>
				<em style="color:red;">SELECT name, avg(age) FROM students;</em></br></br>
				Чтобы избежать ошибки, вам следует добавить следующую строку:</br></br>
				<em style="color:red;">GROUP BY name</em></br></br>
				Причиной тому является, что запись avg(age) является совокупной (aggregated), и вам необходимо группировать значения по имени.</br></br></br>
				<h2>ВЛОЖЕННЫЕ SELECT</h2></br>
				В предыдущих шагах мы изучили, как делать простые вычисления с данными. Если мы хотим использовать результат данных вычислений, то часто нам необходимо использовать так называемые вложенные запросы. Допустим, нам необходимо вывести артиста, альбом и год выпуска самого старого альбома в таблице.</br></br>
				Вывести эти столбцы можно, используя следующий запрос:</br></br>
				<em style="color:red;">SELECT artist, album, released FROM albums;</em></br></br>
				Также мы знаем, как получить самый ранний год из имеющихся:</br></br>
				<em style="color:red;">SELECT MIN(released) FROM album;</em></br></br>
				Объединить эти запросы можно в WHERE:</br></br>
				<em style="color:red;">SELECT artist,album,released </br>
				FROM albums </br>
				WHERE released = (</br>
				 SELECT MIN(released) FROM albums</br>
				);</em></br></br></br>
				<h2>ПРИСОЕДИНЕНИЕ ТАБЛИЦ</h2></br>
				В сложных базах данных чаще всего у нас есть несколько связанных таблиц. К примеру, у нас есть две таблицы: про видеоигры и про разработчиков.</br></br>
				В таблице video_games есть столбец developer_id, в данном случае он является так называемым foreign_key. Чтобы было проще понять, developer_id — это связывающее звено между двумя таблицами.</br></br>
				Если мы хотим вывести всю информацию об игре, включая информацию о её разработчике, нам необходимо подключить вторую таблицу. Чтобы это сделать, можно использовать INNER JOIN:</br></br>
				<em style="color:red;">SELECT video_games.name, video_games.genre, game_developers.name, game_developers.country </br>
				FROM video_games </br>
				INNER JOIN game_developers </br>
				ON video_games.developer_id = game_developers.id;</em></br></br>
				Это, наверное, самый простой пример использования JOIN. Есть ещё несколько вариантов его использования. Для более подробной информации предлагаем перейти по <a href="https://www.w3schools.com/sql/sql_join.asp">этой ссылке</a>.</br></br></br>
				<h2>ПСЕВДОНИМЫ</h2></br>
				Если вы взгляните на предыдущий пример, то вы заметите, что есть два столбца, названных одинаково: «name». Часто это может запутать. Решением данной проблемы являются псевдонимы. Они, к слову, помогают сделать название столбца красивее или понятнее в случае необходимости.</br></br>
				Чтобы присвоить столбцу псевдоним, можно использовать ключевое слово AS:</br></br>
				<em style="color:red;">SELECT games.name, games.genre, devs.name AS developer, devs.country </br>
				FROM video_games AS games </br>
				INNER JOIN game_developers AS devs </br>
				ON games.developer_id = devs.id;</em></br></br></br>
				<h2>UPDATE</h2></br>
				Зачастую нам нужно изменить данные в таблице. В SQL это делается с помощью UPDATE.</br></br>
				Использование UPDATE включает в себя:</br></br>
				-выбор таблицы, в которой находится поле, которое мы хотим изменить</br></br>
				-запись нового значения</br></br>
				-использование WHERE, чтобы обозначить конкретное место в таблице</br></br>
				Предположим, у нас есть таблица с самыми высокооценёнными сериалами всех времён. Однако у нас есть проблема: «Игра Престолов» обозначена как комедия и нам определённо нужно это изменить:</br></br>
				<em style="color:red;">UPDATE tv_series </br>
				SET genre = 'drama' </br>
				WHERE name = 'Game of Thrones';</em></br></br></br>
				<h2>УДАЛЕНИЕ ЗАПИСЕЙ ИЗ ТАБЛИЦЫ</h2></br>
				Удаление записи из таблицы через SQL — очень простая операция. Всё, что нужно — это обозначить, что именно мы хотим удалить.</br></br>
				<em style="color:red;">DELETE FROM tv_series </br>
				WHERE id = 4;</em></br></br>
				<em>Примечание</em>: убедитесь, что используете WHERE, когда удаляете запись из таблицы. Иначе вы удалите все записи из таблицы, сами того не желая.</br></br></br>
				<h2>УДАЛЕНИЕ ТАБЛИЦ</h2></br>
				Если мы хотим удалить все данные из таблицы, но при этом оставить саму таблицу, нам следует использовать команду TRUNCATE:</br></br>
				<em style="color:red;">TRUNCATE TABLE table_name;</em></br></br>
				В случае, если мы хотим удалить саму таблицу, то нам следует использовать команду DROP:</br></br>
				<em style="color:red;">DROP TABLE table_name;</em></br></br></br>
				<h2>ЗАКЛЮЧЕНИЕ</h2></br>
				На этой ноте мы завершаем данный SQL-туториал. Само собой, это не всё, и для полного освоения нужно ещё много изучить, однако данное вступление даст вам толчок для дальнейшего изучения.</p></br></br></br>
				</div>
			</div>
		</div>
		<div class="cl">&nbsp;</div>
	</div>
</div>
<div id="footer">
	<div class="shell">
		<p class="left">
			<a href="index.html">Главная</a>
			<span>|</span>
			<a href="article1.html">Статьи</a>
			<span>|</span>
			<a href="article2.html">Контакты</a>
			<span>|</span>
		</p>
	</div>
</div>
</body>
</html>